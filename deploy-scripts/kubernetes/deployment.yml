apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: $CIRCLE_PROJECT_REPONAME-deployment
spec:  # specification of desired behaviour of deployment
  selector:  # label selector for pods; must match pod template's labels
    matchLabels:
      app: jekyll-nginx
  template:  # pod definition
    metadata:
      labels:
        app: jekyll-nginx
    spec:  # specification of desired behaviour of pod
      replicas: 1
      strategy:
        rollingUpdate:
          maxSurge: 1
          maxUnavailable: 1
        type: RollingUpdate
      containers:  # containers in pod
      - name: blog-jekyll-nginx
        image: nginx
        imagePullPolicy: Always
        ports:
        - containerPort: 8080  # as per `EXPOSE 80` in Dockerfile
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
        
